import os
import sys
import re
import platform
import subprocess

import lit.util
import lit.formats

config.name = "MustSupportPassTest"

# TODO properly detect must lib path from cwd (now: cwd expected to contain lib)
must_bin_dir = os.getcwd() #os.path.abspath('.')
plugin_name = 'MustSupportPass.so'
plugin_args ='-must -must-stats'

execute_external = (True)
config.test_format = lit.formats.ShTest(execute_external)

config.suffixes = ['.c','.cpp']

config.substitutions.append(('%pluginpath', must_bin_dir))
config.substitutions.append(('%pluginname', plugin_name))
config.substitutions.append(('%pluginargs', plugin_args))
