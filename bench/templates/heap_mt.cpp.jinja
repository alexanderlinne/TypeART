#include <thread>

void f() {
    {% for i in range(num_vars) %}
    volatile auto v_{{i}} = new int;
    {% endfor %} 
    {% for i in range(num_vars) %}
    delete v_{{i}};
    {% endfor %} 
}

int main() {
    {% for i in range(num_threads) %}
    auto thread_{{i}} = std::thread(f);
    {% endfor %} 
    {% for i in range(num_threads) %}
    thread_{{i}}.join();
    {% endfor %} 
}
